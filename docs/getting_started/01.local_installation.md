# Local Installation

## Requirements

In order to run LabelIt locally on your system, you must install the following softwares:

- [Git](https://git-scm.com/downloads)
- [Docker](https://docs.docker.com/get-docker/)

Local installation has been tested with **Docker v20.10**

## Steps

### Clone the repository

Clone LabelIt repository using [repository](https://github.com/voicelab-org/labelit)

```bash
git clone git@github.com:voicelab-org/labelit.git
cd labelit
```

**All of the following commands must be run from the root of the labelit folder on your local PC**

### Build or download docker images

- If you plan to develop Labelit, you must build Docker images using:

``` bash 
DOCKERFILE="docker-compose-dev.yaml"
docker compose -f $DOCKERFILE build
```

- If you only want to test a preview of LabelIt, you can run:

``` bash
DOCKERFILE="docker-compose-preview.yaml"
```

### Launch containers

```bash 
docker compose -f $DOCKERFILE up
```

_**Note**: If you have other containers running on your system, they may clash with the new containers. To avoid conflicts, kill these existing containers with the command: `docker kill $(docker ps -q)`_

You will see the output of each container in the same terminal. Do not close the terminal until you are done as this will shut down labelit.

- You can now access **Django admin** at the address [http://localhost:8000/admin](http://localhost:8000/admin)
- Labelit itself (frontend) is accessible at the address [http://localhost:8080](http://localhost:8080)
- The MinIO console (MinIO is the local object storage service, where local audio files are stored) is accessible at [http://localhost:9000](http://localhost:9000)

### Initializing database

Execute these commands to initialize your local database. It will also create some users (see )

```bash
docker compose -f $DOCKERFILE exec backend bash -c "python manage.py migrate && python manage.py create_initial_users_if_do_not_exist"
```

### Update docker images (preview only)

Preview installation relies on `latest` version of the docker images published. If you have launched the preview before, your local images might be outdated. To make sure you have the `latest` version of them, run the following:

```bash
docker compose -f $DOCKERFILE pull
```
